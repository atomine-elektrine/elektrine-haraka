# Haraka-Elektrine Environment Variables
# Copy to .env and set your values

# Domain Configuration
HARAKA_DOMAIN=haraka.elektrine.com

# SSL Configuration
SSL_EMAIL=admin@elektrine.com
STAGING=0

# Shared key (optional)
HARAKA_API_KEY=your-secure-api-key-here

# Directional keys
# Haraka -> Phoenix
PHOENIX_API_KEY=replace-with-haraka-to-phoenix-key
# Phoenix -> Haraka
HARAKA_HTTP_API_KEY=replace-with-phoenix-to-haraka-key

# Phoenix App Integration
PHOENIX_WEBHOOK_URL=https://your-phoenix-app.com/api/haraka/inbound
PHOENIX_VERIFY_URL=https://your-phoenix-app.com/api/haraka/verify-recipient
PHOENIX_DOMAINS_URL=https://your-phoenix-app.com/api/haraka/domains

# Image tag
HARAKA_IMAGE=ghcr.io/atomine-elektrine/elektrine-haraka
HARAKA_IMAGE_TAG=latest

# Optional service images
CADDY_IMAGE=caddy:2-alpine
REDIS_IMAGE=redis:7-alpine
CLAMAV_IMAGE=clamav/clamav:stable
SPAMASSASSIN_IMAGE=dinkel/spamassassin:latest
FAIL2BAN_IMAGE=crazymax/fail2ban:latest
CERT_COPIER_IMAGE=alpine:3.20

# Redis + async queue
REDIS_URL=redis://redis:6379
ELEKTRINE_QUEUE_NAME=elektrine:inbound
ELEKTRINE_DLQ_NAME=elektrine:inbound:dlq

# Worker retry policy
WEBHOOK_MAX_RETRIES=5
WEBHOOK_RETRY_BASE_MS=1000

# Ops CIDRs
METRICS_ALLOWED_CIDRS=127.0.0.1/32 ::1/128
OPS_ALLOWED_CIDRS=127.0.0.1/32 ::1/128

# Queue thresholds
QUEUE_WARN_THRESHOLD=1000
DLQ_CRIT_THRESHOLD=10
